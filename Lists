#include <stdio.h>
#include <stdlib.h>
#include <string.h>


// single linked list declaration 
typedef struct node{
    int data;
    struct node *link;
}node;

// function prototypes

void count_nodes(struct node *head);
void print_data(struct node *head);
void add_at_end(struct node *head, int data);


int main(void){
    int n;
    node *head = malloc(sizeof (node));
    if(head == NULL){
        fprintf(stderr,"memory allocation failed");
        exit(EXIT_FAILURE);
    }
    head->data = 100;
    head->link = NULL;

    node *current = malloc(sizeof (node));
    if(current == NULL){
        fprintf(stderr,"memory allocation failed");
        exit(EXIT_FAILURE);
    }
    current->data = 110;
    current->link = NULL;
    head->link = current;

    current = malloc(sizeof (node));
    if(current == NULL){
        fprintf(stderr,"memory allocation failed");
        exit(EXIT_FAILURE);
    }
    current->data = 130;
    current->link = NULL;
    printf("insert data:\n");
    scanf("%d", &n);
    head->link->link = current;
    add_at_end(head, n);
    count_nodes(head);
    print_data(head);
    return EXIT_SUCCESS;
}
void count_nodes(struct node *head){
    int count = 0;
    if(head == NULL){
        printf("0 nodes");
    }
    struct node *ptr = NULL;
    ptr = head;
    while (ptr != NULL){
        count++;
        ptr = ptr->link;
    }
    printf("number of nodes: %d\n", count);
    return;
}
void print_data(struct node *head){
    int i = 1;
    if(head==NULL){
        printf("linked list is empty\n");
    }
    struct node *ptr = head;
    while (ptr!=NULL){
        printf("data (%d) %d\n",i, ptr->data);
        i++;
        ptr = ptr->link;
    }
}
void add_at_end(struct node *head, int data){
    struct node *ptr, *tmp;
    ptr = head;
    tmp = (struct node *) malloc (sizeof (node));
    tmp->data = data;
    tmp->link = NULL;
    while(ptr->link != NULL){
        ptr = ptr->link;
    }
    ptr->link = tmp;
}
