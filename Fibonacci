#include <stdio.h>
#include <stdlib.h>
#include <string.h>


// Function prototypes
int fibonacci(int n, int *known);

// Main function

int main(){
    int *known, i , n;

    fprintf(stdout,"Insert n:\n");
    scanf("%d", &n);
    known = (int *) malloc((n+1)*sizeof (int));
    if(known == NULL){
        fprintf(stderr,"Memory allocation failed");
        exit(EXIT_FAILURE);
    }

    for(i=0;i<=n;i++){
        known[i] = -1;
    }
    fprintf(stdout,"Fibonacci %d-th term = %d\n", n, fibonacci(n, known));
    free(known);

    return EXIT_SUCCESS;
}

int fibonacci(int n, int *known){
    if(known[n] < 0){
        if(n==0 || n == 1){
            known[n] = n;
        }else{
            known[n] = fibonacci(n-1,known) + fibonacci(n-2, known);
        }
    }

    return known[n];
}
